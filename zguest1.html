<!DOCTYPE HTML>
<html>
  <head>
    <meta charset='utf-8'>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->

    <title>Legacy zcgi zguest1 by ngzm</title>
  </head>
  <body>
    <header>
      <div class="header">
	<h1>Legacy zcgi zguest1</h1>
      </div>
    </header>
    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
	  <!-- ========================================================================= -->
	  <h3>zguest1</h3>
	  <p>
	    Ｚゲストブック１号機のことで、アイコン付きの楽しげなゲストブック掲示板です。<br>管理機能が付いており、投稿の編集、削除、ダウンロードがきます。
	  </p>
	  <!-- ========================================================================= -->
	  <h3>動作条件</h3>
	  <ul>
	    <li>ホームページがあるサーバで（Perl5）以上を使用したCGIが使えること。
	    <li>サーバのOSがLinux、UNIXで、文字コードは EUC_JP もしくは SJIS であること。たぶんUTF8ではだめです。古いんで・・
	    <li>サーバのOSがLinux、UNIXで、Web Server が Apache で動作確認しています。
	  </ul>
	  <!-- ========================================================================= -->
	  <h3>ディレクトリ・ファイル構成</h3>
	  <pre>
            ./zguest1.cgi            ---  Ｚゲストブック１号CGI本体プログラム [GET  METHOD]
            ./zguest1p.cgi           ---  Ｚゲストブック１号CGI本体プログラム [POST METHOD]
            ./zg1adm.cgi             ---  ゲストブック管理CGI本体プログラム   [GET  METHOD]
            ./zg1admp.cgi            ---  ゲストブック管理CGI本体プログラム   [POST METHOD]
            ./userdef.pm             ---  ユーザー環境設定ファイル

            ./lib/                   ---  【ディレクトリ】 ライブラリプログラム格納

            ./lib/zguest1.pm         ---  Ｚゲストブック１号ライブラリプログラム
            ./lib/zg1adm.pm          ---  ゲストブック管理ライブラリプログラム
            ./lib/zg1core.pm         ---  Ｚゲストブック１号・ゲストブック管理共通ライブラリプログラム
            ./lib/zcgi.pm            ---  CGI関連ライブラリプログラム
            ./lib/jcode.pl           ---  日本語文字操作プログラム

            ./img/                   ---  【ディレクトリ】 各種画像ファイル（アイコン、背景）格納

            ./data/                  ---  【ディレクトリ】 投稿メッセージログなどのデータ格納
	  </pre>
	  <!-- ========================================================================= -->
	  <h3>実行権、書込権の付与</h3>
	  <pre>
            ./zguest1.cgi            ---  rwxr-xr-x [ 755 ]
            ./zguest1p.cgi           ---  rwxr-xr-x [ 755 ]
            ./zg1adm.cgi             ---  rwxr-xr-x [ 755 ]
            ./zg1admp.cgi            ---  rwxr-xr-x [ 755 ]
            ./userdef.pm             ---  rw-r--r-- [ 644 ]
            ./lib/                   ---  rwxr-xr-x [ 755 ]
            ./lib/zguest1.pm         ---  rw-r--r-- [ 644 ]
            ./lib/zg1adm.pm          ---  rw-r--r-- [ 644 ]
            ./lib/zg1core.pm         ---  rw-r--r-- [ 644 ]
            ./lib/zcgi.pm            ---  rw-r--r-- [ 644 ]
            ./lib/jcode.pl           ---  rw-r--r-- [ 644 ]
            ./img/                   ---  rwxr-xr-x [ 755 ]
            ./img/配下画像ファイル   ---  rw-r--r-- [ 644 ]
            ./data/                  ---  rwxrwxrwx [ 777 ]
	  </pre>
	  <!-- ========================================================================= -->
	  <h3>ユーザー環境設定ファイルの編集 [ userdef.pm ] -- ゲストブック本体向けの設定</h3>
	  <ul>
	    <li>ユーザー環境設定ファイル [ userdef.pm ] をテキストエディタで開いて編集します。
	    <li>設定できる項目は、大きく分けて、<span>ゲストブック本体向け</span>と、<span>管理メニュー向け</span>の２種類あります。
	    <li>ここでは、<span>ゲストブック本体向け</span>の設定項目について説明します。
	  </ul>
	  <table>
	    <tr>
	      <th>$HomeURL</th>
	      <td>あなたのホームページのHOMEへのURL</td>
	    </tr><tr>
	      <th>$MaxLogCount</th>
	      <td>投稿メッセージログ蓄積数の最大値（最高５１２までです）<br>
		256 以内を推奨しています。<br>
		投稿ログに蓄積されたものがこの数を超える場合、古いものから削除されます。<br>
		投稿ログのシリアル番号はこの数に関係なく継続してカウントされます。<br>
	      </td>
	    </tr><tr>
	      <th>$UserBgColor</th>
	      <td>ゲストブックページ全体の背景色<br>
		&lt;body&gt; タグの bgcolor属性の値です。<br>
		HTML形式（#FFFFFF など）で指定します。<br>
	      </td>
	    </tr><tr>
	      <th>$UserBgImg</th>
	      <td>ゲストブックページ全体の背景画像(gif)ファイル名<br>
		&lt;body&gt; タグの background属性の値です。<br>
		&lt;body&gt; タグの background属性なので上の$UserBgColor より優先されます。<br>
		画像ファイル(gif)は、皆さんでご用意ください。<br>
		画像ファイルは img ディレクトリに配置してください。<br>
	      </td>
	    </tr><tr>
	      <th>$UserFgColor</th>
	      <td>ゲストブックページ全体の文字色 <br>
		&lt;tbody&gt; タグの background属性の値です。<br>
		HTML形式（#4488FF など）で指定します。<br>
	      </td>
	    </tr><tr>
	      <th>$UserTitle</th>
	      <td>タイトル文字<br>
		ブラウザのフレームタイトル、及び、ページの表題になります。<br>
	      </td>
	    </tr><tr>
	      <th>$UserTitleColor</th>
	      <td>タイトル文字表示色 <br>
		HTML形式（#4488FF など）で指定します。<br>
	      </td>
	    </tr><tr>
	      <th>$UserTitleImg</th>
	      <td>タイトル画像(gif)ファイル名<br>
		ページの表題画像になります。<br>
		ページの表題としては、上のタイトル文字 $UserTitle よりも優先されます。<br>
		画像ファイル(gif)は、皆さんでご用意ください。<br>
		表示するサイズは画像ファイル(gif)自身の大きさです。<br>
		画像ファイルは img ディレクトリに配置してください。<br>
	      </td>
	    </tr><tr>
	      <th>$UserLogColor_1〜10</th>
	      <td>投稿メッセージ文字色１〜１０<br>
		投稿フォームで選択可能とする文字色をHTML形式で指定します。<br>
		１〜１０まで指定可能ですが、全てに指定する必要はありません。<br>
		例えば８色だけ指定する場合は、１〜８まで設定し、
		あとはPerlのコメント行とする（行頭に#を入れる）とOKです。<br>
	      </td>
	    </tr><tr>
	      <th>$UserLogIcon_1〜30</th>
	      <td>投稿メッセージアイコンファイル名１〜３０<br>
		投稿フォームで選択可能なアイコン(gif)ファイル名を指定します。
		１〜３０まで指定可能ですが、全てに指定する必要はありません。<br>
		例えば７個だけ指定する場合は、１〜７まで設定し、
		あとはPerlのコメント行とする（行頭に#を入れる）とOKです。<br>
		画像ファイル(gif)は、皆さんでご用意ください。<br>
		表示するサイズは50X50ピクセルを目安に作成してください。<br>
		画像ファイルは img ディレクトリに配置してください。<br>
	      </td>
	    </tr><tr>
	      <th>$UserLogMailIcon</th>
	      <td>投稿メッセージのE-Mail部分に表示するアイコンファイル名<br>
		画像ファイル(gif)は、皆さんでご用意ください。<br>
		ちなみに表示するサイズは20X15ピクセルです。<br>
		画像ファイルは img ディレクトリに配置してください。<br>
	      </td>
	    </tr><tr>
	      <th>$UserLogHomeIcon</th>
	      <td>投稿メッセージのHP部分に表示するアイコンファイル名 <br>
		画像ファイル(gif)は、皆さんでご用意ください。<br>
		ちなみに表示するサイズは20X15ピクセルです。<br>
		画像ファイルは img ディレクトリに配置してください。<br>
	      </td>
	    </tr><tr>
	      <th>$LogDisplayCount</th>
	      <td>投稿メッセージログ 1ページあたりの表示件数（1 〜 100）<br>
		一応規定値の１１くらいでよいでしょう。<br>
	      </td>
	    </tr><tr>
	      <th>$UserLogBgColor</th>
	      <td>新規投稿メッセージ表示背景色 <br>
		メッセージが新規投稿であれば、そのメッセージの背景色はこれです。<br>
		HTML形式（#4488FF など）で指定します。<br>
	      </td>
	    </tr><tr>
	      <th>$UserLogResBgColor</th>
	      <td>返信投稿メッセージ表示背景色 <br>
		メッセージが返信であれば、そのメッセージの背景色はこれです。<br>
		HTML形式（#4488FF など）で指定します。<br>
	      </td>
	    </tr>
	  </table>
	  <ul>
	    <li>以下は、ユーザー環境設定ファイル [ userdef.pm ] でゲストブック本体向けに設定する項目の初期状態です。
	    <li>あなたの構成に合わせて書き換えてくださいませ。
	  </ul>
	  <pre><code>
	      ==== userdef.pm （ゲストブック本体向けに設定する項目） ====
              ..
              ..
              ###################################################################
              #
              #   Guest Book カスタマイズ可能変数（お好みで書き換え可）
              #
              ###################################################################

              # ===========================================================
              # HomeへのURL
              # ===========================================================
              $HomeURL = '/user-home/index.html';

              # ===========================================================
              # ゲストブックログ件数最大数 [ 1 〜 512 ]
              # ----------------------------------------------------
              # 投稿ログに蓄積されたものが、この数を超える場合、古い
              # ものから削除されます。
              # ----------------------------------------------------
              # 尚、投稿ログのシリアル（通し）番号はこの数に関係なく
              # 継続してカウントされます。
              # ===========================================================
              $MaxLogCount = 256;                 ===&gt; 256 以内を推奨しています。

              # ===========================================================
              # ページの背景色 （&lt;body&gt; タグの bgcolor属性）
              # ===========================================================
              $UserBgColor = '#FFFFFF';

              # ===========================================================
              # ページの背景画像（&lt;tbody&gt; タグの background属性）
              # ----------------------------------------------------
              # 画像ファイルは img ディレクトリに配置してください。
              # ===========================================================
              $UserBgImg = 'background.gif';      ===&gt; &lt;body&gt; タグなので、$UserBgColor より優先されます。
              ===&gt; 画像ファイルは img ディレクトリに配置してください。

              # ===========================================================
              # ページ本文の文字色（&lt;body&gt; タグの text属性）
              # ===========================================================
              $UserFgColor = '#3080C0';

              # ===========================================================
              # ページタイトル文字列・色
              # ===========================================================
              $UserTitle      = 'ゲストブックにようこそ';
              $UserTitleColor = '#3080C0';        ===&gt; ブラウザのフレームとページの表題になります。

              # ===========================================================
              # ページタイトルバナー画像
              # ----------------------------------------------------
              # 画像ファイルは img ディレクトリに配置してください。
              # ===========================================================
              $UserTitleImg = 'title.gif';        ===&gt; ページの表題になります。尚、$UserTitle より優先されます。

              # ===========================================================
              # 投稿メッセージ文字表示色。１〜10色まで指定可能。
              # ----------------------------------------------------
              # 全てに指定する必要はない。8 色でOKの場合 1〜8まで設定し、
              # あとはコメント（行頭に#を入れる）にして下さい。
              # ===========================================================
              $UserLogColor_1  = '#000000';       ===&gt; 投稿フォームで選択可能な文字色をHTML形式で指定します。
              $UserLogColor_2  = '#0000FF';
              $UserLogColor_3  = '#4488CC';
              $UserLogColor_4  = '#44CC88';
              $UserLogColor_5  = '#888800';
              $UserLogColor_6  = '#CC8844';
              $UserLogColor_7  = '#CC4488';
              $UserLogColor_8  = '#FF0000';
              # $UserLogColor_9  = '';
              # $UserLogColor_10 = '';

              # ===========================================================
              # 投稿メッセージに表示するアイコン。１〜30まで指定可能。
              # ----------------------------------------------------
              # 全てに指定する必要はない。7つでOKの場合１〜7 まで設定し、
              # あとはコメント（行頭に#を入れる）にして下さい。
              # 画像ファイルは img ディレクトリに配置してください。
              # ===========================================================
              $UserLogIcon_1  = 'user_icon_1.gif';    ===&gt; 投稿フォームで選択可能なアイコンをファイル名で指定します
              $UserLogIcon_2  = 'user_icon_2.gif';    ===&gt; 画像ファイルは img ディレクトリに配置してください。
              $UserLogIcon_3  = 'user_icon_3.gif';
              $UserLogIcon_4  = 'user_icon_4.gif';
              $UserLogIcon_5  = 'user_icon_5.gif';
              $UserLogIcon_6  = 'user_icon_6.gif';
              $UserLogIcon_7  = 'user_icon_7.gif';
              # $UserLogIcon_8  = '';
              # $UserLogIcon_9  = '';
              # $UserLogIcon_10 = '';
              # $UserLogIcon_11 = '';
              # $UserLogIcon_12 = '';
              # $UserLogIcon_13 = '';
              # $UserLogIcon_14 = '';
              # $UserLogIcon_15 = '';
              # $UserLogIcon_16 = '';
              # $UserLogIcon_17 = '';
              # $UserLogIcon_18 = '';
              # $UserLogIcon_19 = '';
              # $UserLogIcon_20 = '';
              # $UserLogIcon_21 = '';
              # $UserLogIcon_22 = '';
              # $UserLogIcon_23 = '';
              # $UserLogIcon_24 = '';
              # $UserLogIcon_25 = '';
              # $UserLogIcon_26 = '';
              # $UserLogIcon_27 = '';
              # $UserLogIcon_28 = '';
              # $UserLogIcon_29 = '';
              # $UserLogIcon_30 = '';

              # ===========================================================
              # メッセージログのメール部分に表示するアイコン。
              # ----------------------------------------------------
              # 画像ファイルは img ディレクトリに配置してください。
              # ===========================================================
              $UserLogMailIcon = 'user_mail.gif';    ===&gt; 画像ファイルは img ディレクトリに配置してください。

              # ===========================================================
              # メッセージログのホーム部分に表示するアイコン。
              # ----------------------------------------------------
              # 画像ファイルは img ディレクトリに配置してください。
              # ===========================================================
              $UserLogHomeIcon = 'user_home.gif';    ===&gt; 画像ファイルは img ディレクトリに配置してください。

              # ===========================================================
              # 投稿ログ 1ページあたりの表示件数 [ 1 〜 100 ]
              # ===========================================================
              $LogDisplayCount = 11;

              # ===========================================================
              # 投稿ログ表示部分背景色（新規投稿の場合）
              # ===========================================================
              $UserLogBgColor = '#FFFFE8';

              # ===========================================================
              # 投稿ログ表示部分背景色（返信の場合）
              # ===========================================================
              $UserLogResBgColor = '#FFEEEE';
              ..
              ..
	  </code></pre>
	  <!-- ========================================================================= -->
	  <h3>ユーザー環境設定ファイルの編集 [ userdef.pm ] -- 管理メニュー向けの設定</h3>
	  <ul>
	    <li>ユーザー環境設定ファイル [ userdef.pm ] をメモ帳などのテキストエディタで開いて編集します。
	    <li>設定できる項目は、大きく分けて、<span>ゲストブック本体向け</span>と、<span>管理メニュー向け</span>の２種類あります。
	    <li>ここでは、<span>管理メニュー向け</span>の設定項目について説明します。
	  </ul>
	  <ul>
	    <li>管理メニュー向けに設定できる項目は次のとおりです。
	  </ul>
	  <table>
	    <tr>
	      <th>$AdminUserName</th>
	      <td>管理者の名前<br>
		管理メニューの返信ボタンで表示される返信フォームに予めセットしておくために定義します。<br>
		管理者は、いちいちフォームにキー入力するのも面倒だからです。<br>
	      </td>
	    </tr><tr>
	      <th>$AdminUserSex</th>
	      <td>管理者の性別<br>
		管理者が男性であれば 0 を、女性は 1 を設定します。<br>
		管理メニューの返信ボタンで表示される返信フォームに予めセットしておくために定義します。<br>
		管理者は、いちいちフォームにキー入力するのも面倒だからです。<br>
	      </td>
	    </tr><tr>
	      <th>$AdminUserEmail</th>
	      <td>管理者のEmail<br>
		管理のEmailアドレスを設定します。<br>
		管理メニューの返信ボタンで表示される返信フォームに予めセットしておくために定義します。<br>
		管理者は、いちいちフォームにキー入力するのも面倒だからです。<br>
	      </td>
	    </tr><tr>
	      <th>$UserBgImg</th>
	      <td>管理者のHPトップページURL<br>
		管理のHPトップページURLを設定します。<br>
		管理メニューの返信ボタンで表示される返信フォームに予めセットしておくために定義します。<br>
		管理者は、いちいちフォームにキー入力するのも面倒だからです。<br>
	      </td>
	    </tr><tr>
	      <th>$AdminUserHpName</th>
	      <td>管理者のHP名称<br>
		管理のHP名称を設定します。<br>
		管理メニューの返信ボタンで表示される返信フォームに予めセットしておくために定義します。<br>
		管理者は、いちいちフォームにキー入力するのも面倒だからです。<br>
	      </td>
	    </tr><tr>
	      <th>$AdminPasswd</th>
	      <td>管理ツールアクセス時パスワード<br>
		英数字（半角)4桁〜16桁で指定してください。<br>
		アクセスログ管理メニューでは、このパスワードで管理者の認証をおこないます。<br>
		一度認証したらクッキーに記憶しますので、その後しばらく（３０日間）はクッキーで自動認証します。<br>
		このパスワードは他人から盗まれないよう注意してください。<br>
	      </td>
	    </tr><tr>
	      <th>$CriptKey</th>
	      <td>管理ツールアクセス時パスワード暗号化キー
		英数字（半角)4桁〜16桁で指定してください。<br>
		アクセスログ管理ツールのパスワードを暗号化する時の暗号カギです。<br>
		この暗号化キーも他人から盗まれないよう注意してください。<br>
	      </td>
	    </tr>
	  </table>
	  <ul>
	    <li>以下は、ユーザー環境設定ファイル [ userdef.pm ] で管理メニュー向けに設定する項目の初期状態です。
	    <li>あなたの構成に合わせて書き換えてくださいませ。
	  </ul>
	  <pre><code>
	      ==== userdef.pm （管理メニュー向けに設定する項目） ====
	      ..
	      ..
	      ###################################################################
	      #
	      #   管理者メニューカスタマイズ可能変数（お好みで書き換え可）
	      #
	      ###################################################################

	      # ===========================================================
	      # 管理者の名前
	      # ===========================================================
	      $AdminUserName = '管理者';

	      # ===========================================================
	      # 管理者の性別 [男:0 女:1]
	      # ===========================================================
	      $AdminUserSex = '0';

	      # ===========================================================
	      # 管理者のEmail
	      # ===========================================================
	      $AdminUserEmail = 'webmaster@zumin.cside9.com';

	      # ===========================================================
	      # 管理者のHPトップページURL
	      # ----------------------------------------------------
	      # こちらは絶対パス（http:// から）で記述してください。
	      # ===========================================================
	      $AdminUserHpURL = 'http://zumin.cside9.com/';

	      # ===========================================================
	      # 管理者のHP名称
	      # ===========================================================
	      $AdminUserHpName = 'Zumin';

	      # ===========================================================
	      #  管理ツールアクセス時パスワード
	      # ----------------------------------------------------
	      #  アクセスログ管理ツールを使用する場合このパスワード
	      #  で管理者の認証をおこないます。
	      #  他人から盗まれないよう注意してください。
	      #  英数字（半角)4桁〜16桁で指定してください。
	      # ===========================================================
	      $AdminPasswd = 'guest';

	      # ===========================================================
	      #  管理ツールアクセス時パスワード暗号化キー
	      # ----------------------------------------------------
	      #  アクセスログ管理ツールのパスワードを暗号化する時
	      #  の暗号カギです。
	      #  他人から盗まれないよう注意してください。
	      #  英数字（半角)4桁〜16桁で指定してください。
	      # ===========================================================
	      $CriptKey = 'password_key';
	      ..
	      ..
	  </code></pre>
	</section>
	<aside id="sidebar">
	  <h3><a href="index.html">[ 戻る ]</a></h3>
	</aside>
      </div>
    </div>
  </body>
</html>
