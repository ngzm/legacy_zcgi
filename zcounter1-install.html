<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/REC-html40/strict.dtd">
<html lang="ja">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=Shift_JIS">
<meta http-equiv="Content-Style-Type" content="text/css"> 
<meta name="author" content="N.ZUMIN">
<meta name="description" content="人口無能ほか各種CGIフリーソフト提供など">
<meta name="keywords" content="ZUMIN、UNIX、Linux、人口無能、CGI、Perl、フリーソフト">
<link rel="stylesheet" type="text/css" href="/style/zumin.css" media="screen, projection, print">

<title>Ｚカウンター１号</title>
</head>
<body>
<address>
[ <a class="magenda" href="/">HOME</a> ]
[ <a class="magenda" href="index.html">戻る</a> ]
</address>
zcounter1 Ver.1.0.3 2003/02/15

<h1>Ｚカウンター１号</h1>
<div class="content">

<!-- ============================================================================================= -->
<h3 class="blue">Ｚカウンター１号とは</h3>
<ul>
	<li>Zumin カウンター１号機です。
	<li>Ｚカウンター１号は、GIFイメージのアクセスカウンターです。
	<li>サーバー上の CGI で GIFイメージを一気に連結して送信するため高速です。
	<li>同一IPアドレスのチェック（オプション）機能により、リロードなどによる無意味なカウントアップを抑制します。
	<li>SSI は使用しません。SSI 非対応のサイトでも問題ありません。
	<li>誰でも簡単に設置できることを優先しシンプルさを追求し、カウンターのみの機能に限定しました。
</ul>
<br>
<!-- ============================================================================================= -->
<h3 class="blue">こんな感じです</h3>

<blockquote>
	<img src="demo/zcounter1/counter_img/left.gif"><img src="demo/zcounter1/zcounter1.cgi"><img src="demo/zcounter1/counter_img/right.gif">
</blockquote>
<ul>
	<li>デモ版なので同一IPアドレスのチェックは外しています。
</ul>

<blockquote>
カウンターGIFは<a href="http://www10.big.or.jp/~gayou/nmr/nmr.html" target="zumin">なまらさん</a>作のカウンター画像を利用しています。
この他にも沢山のカウンター画像があってお薦めのサイトです。
<p>
<a href="http://www10.big.or.jp/~gayou/nmr/nmr.html" target="zumin">
<img src="../banner/namarane01-200-40.jpg">
</a>
</blockquote>

<br>
<!-- ============================================================================================= -->
<h3 class="blue">動作条件</h3>
<ul>
	<li>ホームページがあるサーバーでPerlを使用したCGIが使えること。
	<li>Perlのバージョンが 5（Perl5）以上であること。
	<li>ホームページがあるサーバーのOSがLinux、UNIXであり、Web Server が Apache で動作確認しています。
	<li>上記以外では動作確認していません。あしからずご了承ください。
</ul>
<br>
<!-- ============================================================================================= -->
<h3 class="blue">ここからダウンロードできます</h3>
<ul>
	<li>Windowsな人 <a href="download/zcounter1.exe">自己解凍形式(EXE)</a>
	<li>Windowsな人 <a href="download/zcounter1.zip">ZIP形式</a>
	<li>Linux、UNIXな人（準備中）
	<li>ダウンロードしたら自分のローカルマシン上で解凍してください。
	<li>必ず、ディレクトリ付きで解凍してください。
</ul>
<br>
<!-- ============================================================================================= -->
<h3 class="blue">ディレクトリ・ファイル構成</h3>
<pre>
        (注） . はカレントディレクトリ

        ./zcounter1.cgi          ---  Ｚカウンター１号CGI本体プログラム
        ./userdef.pm             ---  ユーザー環境設定ファイル
        ./gifcat.pl              ---  GIFイメージ操作プログラム（とほほさん著作）
        ./counter_img/           ---  カウンターGIF格納ディレクトリ
        ./counter_img/zero.gif   ---  カウンターGIFファイル [ 0 ]
        ./counter_img/one.gif    ---  カウンターGIFファイル [ 1 ]
        ./counter_img/two.gif    ---  カウンターGIFファイル [ 2 ]
        ./counter_img/three.gif  ---  カウンターGIFファイル [ 3 ]
        ./counter_img/four.gif   ---  カウンターGIFファイル [ 4 ]
        ./counter_img/five.gif   ---  カウンターGIFファイル [ 5 ]
        ./counter_img/six.gif    ---  カウンターGIFファイル [ 6 ]
        ./counter_img/seven.gif  ---  カウンターGIFファイル [ 7 ]
        ./counter_img/eight.gif  ---  カウンターGIFファイル [ 8 ]
        ./counter_img/nine.gif   ---  カウンターGIFファイル [ 9 ]
        ./data/                  ---  カウンターデータ格納ディレクトリ
        ./data/error.gif         ---  エラー表示用GIF
</pre>
<ul>
	<li>以上のディレクトリ・ファイルがあれば、うまく解凍できています。
	<li>カウンター設置のためには、ユーザー環境設定ファイル [userdef.pm] でお好みの設定を定義します。
</ul>

<blockquote>
ダウンロードパッケージに含まれるカウンターGIFファイル [counter_img/XXX.gif]は、
こちらで用意している、ずうみん村サイトの <a href="http://zumin.cside9.com/yuuri/" target="zumin">ゆうり</a>作
サンプルですので、お好みのカウンター GIF と入れ替えてください。
<p>
<a href="http://zumin.cside9.com/yuuri/" target="zumin">
<img src="../banner/banner_yuuri.gif">
</a>
</blockquote>

<br>
<!-- ============================================================================================= -->
<h3 class="blue">カウンターGIFファイルの用意</h3>
<ul>
	<li>これだ！と思うカウンター用GIFファイルをカウンターGIF格納ディレクトリ[ counter_img ] に格納します。
	<li>カウンター用GIFファイルは、0〜9までの数字毎にファイル名が決まっています。間違わないように気をつけてください！
</ul>
<pre>
        ./counter_img/zero.gif   ---  [ 0 ] のGIFファイル
        ./counter_img/one.gif    ---  [ 1 ] のGIFファイル
        ./counter_img/two.gif    ---  [ 2 ] のGIFファイル
        ./counter_img/three.gif  ---  [ 3 ] のGIFファイル
        ./counter_img/four.gif   ---  [ 4 ] のGIFファイル
        ./counter_img/five.gif   ---  [ 5 ] のGIFファイル
        ./counter_img/six.gif    ---  [ 6 ] のGIFファイル
        ./counter_img/seven.gif  ---  [ 7 ] のGIFファイル
        ./counter_img/eight.gif  ---  [ 8 ] のGIFファイル
        ./counter_img/nine.gif   ---  [ 9 ] のGIFファイル
</pre>
<ul>
	<li>カウンターGIFファイルは、素材やさんのサイトからダウンロードするか、ご自分で作成されても良いと思います。
	<li>但し、GIF形式で保存された画像に限ります。
	<li>カウンターGIFの解像度が大きいほど、GIFファイル連結処理やネットワーク転送処理で時間がかかりますので非効率です。
</ul>
<br>
<!-- ============================================================================================= -->
<h3 class="blue">ユーザー環境設定ファイルの編集 [ userdef.pm ]</h3>
<ul>
	<li>ユーザー環境設定ファイル [ userdef.pm ] をメモ帳などのテキストエディタで開いて編集します。
	<li>設定項目は以下の2項目です。
	<ol>
		<li>カウンターの表示桁数 [ $CounterSize ]
		<li>同一IPアドレスのチェック [ $CheckHomonymIp ]
	</ol>
</ul>
<pre><code>
    ==== userdef.pm ====
        ..
        ..
        ###################################################################
        #
        #   カスタマイズ可能変数（お好みで書き換え可）
        #
        ###################################################################

        # -----------------------------------
        # カウンターの表示桁数です。
        # -----------------------------------
        $CounterSize = 6;       <==== 左記の 6 を 好きな桁に変更できます。
                                <==== イコール[ = ] や セミコロン [ ; ] まで
                                      消してしまわないように気をつけて。

        # -----------------------------------
        # 同一IPアドレスのチェックです。
        #   1 : チェックします。
        #   0 : チェックしません。
        # -----------------------------------
        $CheckHomonymIp = 1;    <==== 左記の 1 を 0 に変更できます。
                                <==== イコール[ = ] や セミコロン [ ; ] まで
                                      消してしまわないように気をつけて。
        ..
        ..
</code></pre>
<ul>
	<li>カウンターの表示桁数は、表示桁数です。。説明するまでもないか、、
	<li>同一IPアドレスのチェックを１にすると、同じ人が [ホーム] などをクリックするたびにカウントアップしないようにできます。
	<li>上記以外の箇所は編集しないでください。（Perlでプログラムできる人は除く）
</ul>
<br>
<!-- ============================================================================================= -->
<h3 class="blue">Perlを使用する時のおまじない行の編集  [ zcounter1.cgi ]</h3>
<ul>
	<li>自分のホームページがあるサーバーのPerlへのパスを指定します。Perlへのパスは、ホームページを置いているサーバー管理者に聞いてください。
	<li>編集するのは、CGI本体プログラム [ zcounter1.cgi ] の先頭行のみです。
	<li>zcounter1.cgi をメモ帳などのテキストエディタで開いて編集します。
</ul>
<pre><code>
    ==== zcounter1.cgi ====

        #!/usr/bin/perl         <==== 先頭行です。

        ..
        ..
</code></pre>
<br>
<!-- ============================================================================================= -->
<h3 class="blue">サーバにアップロード</h3>
<ul>
	<li>自分のホームページがあるサーバーにディレクトリ・ファイル構成に気をつけてアップしてください。（普通にFTPでアップする手順でOKと思います。）
	<li>但し、サーバーの漢字コードに注意してください。例えば、ローカルなPCがWindowsで、サーバーがUNIXやLinuxの場合は、FTP転送時に漢字コード変換が必要になります（必要ない場合もあるが、、）。よく分からない人は、ホームページを置いているサーバー管理者に相談してください。
	<li>漢字コード変換が必要な場合は、以下に従ってアップしてください。
</ul>
<pre>
        ./zcounter1.cgi          ---  漢字コード変換が必要です。[ FTP アスキー転送モード ]
        ./userdef.pm             ---  漢字コード変換が必要です。[ FTP アスキー転送モード ]
        ./gifcat.pl              ---  漢字コード変換が必要です。[ FTP アスキー転送モード ]
        ./counter_img/zero.gif   ---  変換は不要です。          [ FTP バイナリ転送モード ]
        ./counter_img/one.gif    ---  変換は不要です。          [ FTP バイナリ転送モード ]
        ./counter_img/two.gif    ---  変換は不要です。          [ FTP バイナリ転送モード ]
        ./counter_img/three.gif  ---  変換は不要です。          [ FTP バイナリ転送モード ]
        ./counter_img/four.gif   ---  変換は不要です。          [ FTP バイナリ転送モード ]
        ./counter_img/five.gif   ---  変換は不要です。          [ FTP バイナリ転送モード ]
        ./counter_img/six.gif    ---  変換は不要です。          [ FTP バイナリ転送モード ]
        ./counter_img/seven.gif  ---  変換は不要です。          [ FTP バイナリ転送モード ]
        ./counter_img/eight.gif  ---  変換は不要です。          [ FTP バイナリ転送モード ]
        ./counter_img/nine.gif   ---  変換は不要です。          [ FTP バイナリ転送モード ]
        ./data/error.gif         ---  変換は不要です。          [ FTP バイナリ転送モード ]
</pre>
<br>
<!-- ============================================================================================= -->
<h3 class="blue">実行権、書込権の付与</h3>
<ul>
	<li>サーバー上のCGIが動作できるように、CGIスクリプトの実行権と、ファイルへの書込み権を設定します。
	<li>サーバーにアップしたファイルやディレクトリの属性を、以下のとおりに変更してください。
</ul>
<pre>
        ./zcounter1.cgi          ---  rwxr-xr-x [ 755 ]
        ./userdef.pm             ---  rw-r--r-- [ 644 ]
        ./gifcat.pl              ---  rw-r--r-- [ 644 ]
        ./counter_img/           ---  rwxr-xr-x [ 755 ]
        ./counter_img/zero.gif   ---  rw-r--r-- [ 644 ]
        ./counter_img/one.gif    ---  rw-r--r-- [ 644 ]
        ./counter_img/two.gif    ---  rw-r--r-- [ 644 ]
        ./counter_img/three.gif  ---  rw-r--r-- [ 644 ]
        ./counter_img/four.gif   ---  rw-r--r-- [ 644 ]
        ./counter_img/five.gif   ---  rw-r--r-- [ 644 ]
        ./counter_img/six.gif    ---  rw-r--r-- [ 644 ]
        ./counter_img/seven.gif  ---  rw-r--r-- [ 644 ]
        ./counter_img/eight.gif  ---  rw-r--r-- [ 644 ]
        ./counter_img/nine.gif   ---  rw-r--r-- [ 644 ]
        ./data/                  ---  rwxrwxrwx [ 777 ]
        ./data/error.gif         ---  rw-r--r-- [ 644 ]
</pre>
<br>
<!-- ============================================================================================= -->
<h3 class="blue">ページへの組み込み</h3>
<ul>
	<li>カウンターを表示したいページに次のタグを組み込みます。
	<li>&lt;IMG SRC="--cgiへのURL--/zcounter1.cgi"&gt;
	<li>例えば、相対的なパスで<strong> " cgi-bin/counter/ "</strong> に設置した場合
		<strong>&lt;IMG SRC="cgi-bin/counter/zcounter1.cgi"&gt;</strong>となります。
</ul>
<!-- ============================================================================================= -->
</div>

<p>
●うーん、、わからん！うごかない！などのご質問は掲示板に！<br>
●と、いいたいところですが、現在掲示板の準備中ですので、しばらくお待ちください。<br>
</p>

<address>
[ <a class="magenda" href="/">HOME</a> ]
[ <a class="magenda" href="index.html">戻る</a> ]
</address>

</body>
</html>
