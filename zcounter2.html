<!DOCTYPE HTML>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" type="text/css" href="/style/zumin.css" media="screen, projection, print">
    <title>zcounter2</title>
  </head>
  <body>
    <header>
      <div class="header">
	<h1>Legacy zcgi zcounter1</h1>
      </div>
    </header>
    <div class="content">
      <section>
	<!-- ============================================================================================= -->
	<h3>zcounter2</h3>
	<ul>
	  <li>zcounter2 とは Zumin カウンター２号機のことです。
	  <li>Ｚカウンター２号は、GIFイメージのアクセスカウンターです。
	  <li>同一IPアドレスのチェック（オプション）機能により、リロードなどによる無意味なカウントアップを抑制します。
	  <li>アクセスカウンターにプラスして管理機能が付いています。
	  <li>管理機能では、アクセス日時やアクセスしてきたホストなどのアクセスログが収集できます。
	  <li>管理機能では、アクセスログの参照、ダウンロード、削除ができます。
	</ul>
	<!-- ============================================================================================= -->
	<h3 class="blue">動作条件</h3>
	<ul>
	  <li>ホームページがあるサーバで（Perl5）以上を使用したCGIが使えること。
	  <li>サーバのOSがLinux、UNIXで、文字コードは EUC_JP もしくは SJIS であること。たぶんUTF8ではだめです。古いんで・・
	  <li>サーバのOSがLinux、UNIXで、Web Server が Apache で動作確認しています。
	</ul>
	<!-- ============================================================================================= -->
	<h3 class="blue">ディレクトリ・ファイル構成</h3>
	<pre>
	  ./zcounter2.cgi          ---  Ｚカウンター２号CGI本体プログラム
	  ./zc2adm.cgi             ---  アクセスログ管理CGI本体プログラム
	  ./userdef.pm             ---  ユーザー環境設定ファイル
	  ./lib/                   ---  【ディレクトリ】 ライブラリプログラム格納   
	  ./lib/zcounter2.pm       ---  Ｚカウンター２号ライブラリプログラム
	  ./lib/zc2adm.pm          ---  アクセスログ管理ライブラリプログラム
	  ./lib/zcgi.pm            ---  CGI関連ライブラリプログラム
	  ./lib/jcode.pl           ---  日本語文字操作プログラム
	  ./lib/gifcat.pl          ---  GIFイメージ操作プログラム（とほほさん著作）
	  ./counter_img/           ---  【ディレクトリ】 カウンターGIF格納
	  ./counter_img/zero.gif   ---  カウンターGIFファイル [ 0 ]
	  ./counter_img/one.gif    ---  カウンターGIFファイル [ 1 ]
	  ./counter_img/two.gif    ---  カウンターGIFファイル [ 2 ]
	  ./counter_img/three.gif  ---  カウンターGIFファイル [ 3 ]
	  ./counter_img/four.gif   ---  カウンターGIFファイル [ 4 ]
	  ./counter_img/five.gif   ---  カウンターGIFファイル [ 5 ]
	  ./counter_img/six.gif    ---  カウンターGIFファイル [ 6 ]
	  ./counter_img/seven.gif  ---  カウンターGIFファイル [ 7 ]
	  ./counter_img/eight.gif  ---  カウンターGIFファイル [ 8 ]
	  ./counter_img/nine.gif   ---  カウンターGIFファイル [ 9 ]
	  ./data/                  ---  【ディレクトリ】 カウンターデータ格納
	  ./data/error.gif         ---  エラー表示用GIF
	</pre>
	<br>
	ソースに含まれるカウンターGIFファイル [counter_img/XXX.gif]は、娘（当時5才）が描いたサンプルですので、お好みのカウンタ GIF と入れ替えてくだせい。
	<!-- ============================================================================================= -->
	<h3 class="blue">実行権、書込権の付与</h3>
	<pre>
	  ./zcounter2.cgi          ---  rwxr-xr-x [ 755 ]
	  ./zc2adm.cgi             ---  rwxr-xr-x [ 755 ]
	  ./userdef.pm             ---  rw-r--r-- [ 644 ]
	  ./lib/                   ---  rwxr-xr-x [ 755 ]
	  ./lib/zcounter2.pm       ---  rw-r--r-- [ 644 ]
	  ./lib/zc2adm.pm          ---  rw-r--r-- [ 644 ]
	  ./lib/zcgi.pm            ---  rw-r--r-- [ 644 ]
	  ./lib/jcode.pl           ---  rw-r--r-- [ 644 ]
	  ./lib/gifcat.pl          ---  rw-r--r-- [ 644 ]
	  ./counter_img/           ---  rwxr-xr-x [ 755 ]
	  ./counter_img/zero.gif   ---  rw-r--r-- [ 644 ]
	  ./counter_img/one.gif    ---  rw-r--r-- [ 644 ]
	  ./counter_img/two.gif    ---  rw-r--r-- [ 644 ]
	  ./counter_img/three.gif  ---  rw-r--r-- [ 644 ]
	  ./counter_img/four.gif   ---  rw-r--r-- [ 644 ]
	  ./counter_img/five.gif   ---  rw-r--r-- [ 644 ]
	  ./counter_img/six.gif    ---  rw-r--r-- [ 644 ]
	  ./counter_img/seven.gif  ---  rw-r--r-- [ 644 ]
	  ./counter_img/eight.gif  ---  rw-r--r-- [ 644 ]
	  ./counter_img/nine.gif   ---  rw-r--r-- [ 644 ]
	  ./data/                  ---  rwxrwxrwx [ 777 ]
	  ./data/error.gif         ---  rw-r--r-- [ 644 ]
	</pre>
	<!-- ============================================================================================= -->
	<h3 class="blue">ユーザー環境設定ファイルの編集 [ userdef.pm ]</h3>
	<ul>
	  <li>ユーザー環境設定ファイル [ userdef.pm ] をメモ帳などのテキストエディタで開いて編集します。
	  <li>設定できる項目は以下の 7 項目です。
	    <ol>
	      <li>あなたのホームページのHOMEへのURL [ $HomeURL ]
	      <li>カウンターの表示桁数 [ $CounterSize ]
	      <li>同一IPアドレスのチェック [ $CheckHomonymIp ]
	      <li>同一IPアドレスのチェック時に適用される時間間隔 [ $NoCountSpan ]
	      <li>アクセスログ件数上限 [ $AccessLogMax ]
	      <li>アクセスログ管理ツールアクセス時パスワード [ $AdminPasswd ]
	      <li>パスワード暗号化キー [ $CriptKey ]
	    </ol>
	</ul>
	<pre><code>
	    ==== userdef.pm ====
	    ..
	    ..
	    ###################################################################
	    #
	    #   カスタマイズ可能変数（お好みで書き換え可）
	    #
	    ###################################################################

	    # ===========================================================
	    #               ☆☆☆ $HomeURL ☆☆☆
	    # ----------------------------------------------------
	    #  あなたのホームページのHOMEへのURLです。
	    # ===========================================================
	    $HomeURL = '/YourHomePage/index.html';

	    # ===========================================================
	    #               ☆☆☆ $CounterSize ☆☆☆
	    # ----------------------------------------------------
	    #  カウンターの表示桁数です。
	    #  1 以上、16 以内で設定してください。
	    #  上記範囲外ですとディフォルトの 6 桁となります。
	    # ===========================================================
	    $CounterSize = 5;

	    # ===========================================================
	    #               ☆☆☆ $CheckHomonymIp ☆☆☆
	    # ----------------------------------------------------
	    #  同一IPアドレスの場合はカウントしないようプログラム
	    #  でチェックする設定です。
	    # ----------------------------------------------------
	    #   1 : チェックします。
	    #       同一IPアドレスの場合はカウントしなくなります。
	    #   0 : チェックしません。
	    #       同一IPアドレスの場合でもカウントします。
	    # ===========================================================
	    $CheckHomonymIp = 1;

	    # ===========================================================
	    #               ☆☆☆ $NoCountSpan ☆☆☆
	    # ----------------------------------------------------
	    #  同一IPアドレスのチェックするとき、前回のアクセス
	    #  から一定時間経過したら、たとえ、同一IPアドレスか
	    #  らのアクセスであってもカウンタを進めたい場合に、
	    #  その一定時間を分（Minutes)で設定できます。
	    # ----------------------------------------------------
	    #   注意：
	    #   上記、$CheckHomonymIp を 0 に設定した場合、ここ
	    #   にどんな値を設定しても無効です。
	    # ----------------------------------------------------
	    #   注意：
	    #   上記、$CheckHomonymIp を 1 に設定し、且つ、
	    #   $NoCountSpan を 0 に設定した場合は、何時間たって
	    #   も、他の誰か、つまり、異なるIPアドレスからのアク
	    #   セスがない限り、カウンタは進みません。
	    # ===========================================================
	    $NoCountSpan = 15;

	    # ===========================================================
	    #               ☆☆☆ $AccessLogMax ☆☆☆
	    # ----------------------------------------------------
	    #  アクセスログ件数上限
	    #  この上限値を超えるタイミングで、アクセスログが一旦
	    #  クリアされます。それまでのログは破棄されます。
	    # ===========================================================
	    $AccessLogMax = 1024;

	    # ===========================================================
	    #               ☆☆☆ $AdminPasswd ☆☆☆
	    # ----------------------------------------------------
	    #  アクセスログ管理ツールアクセス時パスワード
	    # ----------------------------------------------------
	    #  アクセスログ管理ツールを使用する場合このパスワード
	    #  で管理者の認証をおこないます。
	    #  他人から盗まれないよう注意してください。
	    # ----------------------------------------------------
	    #  英数字（ASCII)4桁〜16桁で指定してください。
	    # ===========================================================
	    $AdminPasswd = 'admin';

	    # ===========================================================
	    #               ☆☆☆ $CriptKey ☆☆☆
	    # ----------------------------------------------------
	    #  アクセスログ管理ツールアクセス時パスワード
	    #  暗号化キー
	    # ----------------------------------------------------
	    #  アクセスログ管理ツールのパスワードを暗号化する時
	    #  の暗号カギです。
	    #  他人から盗まれないよう注意してください。
	    # ----------------------------------------------------
	    #  英数字（ASCII)4桁〜16桁で指定してください。
	    # ===========================================================
	    $CriptKey = 'password_key';
	    ..
	    ..

	</code></pre>
      </section>
      <aside id="sidebar">
	<h3><a href="index.html">[ 戻る ]</a></h3>
      </aside>
    </div>
  </body>
</html>
